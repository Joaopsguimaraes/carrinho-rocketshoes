## üõí Basic POC - Cart

Essa¬†√©¬†aplica√ß√£o onde o seu principal objetivo √© criar um hook de carrinho de compras. Voc√™ vera funcionalidades basicas e funcionamentos em hooks e context api, sao algumas das funcionalidades:

- Adicionar um novo produto ao carrinho;
- Remover um produto do carrinho;
- Alterar a quantidade de um produto no carrinho;
- C√°lculo dos pre√ßos sub-total e total do carrinho;
- Valida√ß√£o de estoque;
- Exibi√ß√£o de mensagens de erro;
- Entre outros.

**Fake API com JSON Server**: Vamos utilizar o JSON Server para simular uma API que possui as informa√ß√µes dos produtos e do estoque.

### Preservando carrinho com localStorage API

Para preservar os dados do carrinho mesmo se fecharmos a aplica√ß√£o, utilizaremos a **localStorage API**

Essa √© uma API que nos permite persistir dados no navegador em um esquema de chave-valor (semelhante ao que temos com objetos JSON). Como essa √© uma API global, voc√™ n√£o precisa importar nada antes de usar. 

Para salvar os dados, voc√™ deve utilizar o m√©todo `setItem`. Como primeiro argumento voc√™ deve informar o nome que voc√™ quer dar para o registro.
```tsx
  const removeProduct = (productId: number) => {
    try {
      const updateCart = [...cart];
      const productIndex = updateCart.findIndex( product => product.id === productId);

      if(productIndex >= 0){
        updateCart.splice(productIndex, 1);
        setCart(updateCart);
        localStorage.setItem('@RocketShoes:cart', JSON.stringify(updateCart));
      }else{
        throw Error();
      }

    } catch {
      toast.error('Erro na remo√ß√£o do produto');
    }
  };

```

Caso queira enviar um valor para o registro que n√£o esteja no formato string, √© preciso trat√°-lo (ex.: JSON.stringify). Isso far√° com que um objeto, lista, n√∫mero ou qualquer outro valor seja convertido para uma string.

Para recuperar os dados, voc√™ deve utilizar o m√©todo `getItem` passando como argumento do registro.

```tsx
  const [cart, setCart] = useState<Product[]>(() => {
    const storagedCart = localStorage.getItem('@RocketShoes:cart');

    if (storagedCart) {
      return JSON.parse(storagedCart);
    }

    return [];
  });

```

O valor retornado pelo m√©todo getItem √© sempre no formato string. Caso voc√™ queira utilizar esse dado em outro formato, √© preciso trat√°-los (ex.: JSON.parse). Isso ir√° converter a informa√ß√£o ao estado original de quando foi salva com o JSON.strigify, seja uma lista, um objeto ou outro tipo de dado.

Caso queira estudar mais sobre a **localStorage API**, d√™ uma olhada aqui

[Window.localStorage](https://developer.mozilla.org/pt-BR/docs/Web/API/Window/localStorage)

### Mostrando erros com toastify

Para mostrar os erros em tela, iremos utilizar um pacote chamado **react-toastify**. Ela ajuda a mostra informa√ß√µes tempor√°rias e r√°pidas de uma forma bem bonita.

De todos os m√©todos, utilizaremos apenas o `error` e ser√° obrigat√≥rio utilizar mensagens predefinidas para que os testes passem (veremos mais sobre isso)

Caso queira estudar mais sobre a **react-toastify**, d√™ uma olhada aqui

[fkhadra/react-toastify](https://github.com/fkhadra/react-toastify#readme)

